# 

PortSystem      1.0

name		org-mode
version         6.31a
categories      editors
platforms       darwin
maintainers     greg.novak@gmail.com
description     Org-mode is a mode for keeping notes, maintaining ToDo lists, and doing project planning with a fast and effective plain-text system.

long_description \
    Org-mode develops organizational tasks around NOTES files that \
    contain information about projects as plain text. Org-mode is \
    implemented on top of outline-mode, which makes it possible to \
    keep the content of large files well structured. Visibility \
    cycling and structure editing help to work with the tree. Tables \
    are easily created with a built-in table editor. Org-mode supports \
    ToDo items, deadlines, time stamps, and scheduling. It dynamically \
    compiles entries into an agenda. Plain text URL-like links connect \
    to websites, emails, Usenet messages, BBDB entries, and any files \
    related to the projects. For printing and sharing of notes, an \
    Org-mode file can be exported as a structured ASCII file, HTML, \
    and LaTeX.

homepage        http://orgmode.org/
master_sites    http://orgmode.org/
distname        org-${version}

checksums       md5 b0fd1493770f1487b327c13e05d38ea8 \
                sha1 089e64f6eaa370808135a0bdfe429e643777f452 \
                rmd160 dbabe49f94fc1371fb32db8209696efeaf6a2ddb

# FIXME -- does this fail to build if /opt/local/bin/emacs is not installed?
depends_build   port:emacs port:texinfo path:bin/emacs:emacs
depends_run     port:emacs

use_configure   no

#build {
#    system "cd ${worksrcpath} && \
#        emacs --batch --eval \
#            '(progn (setq load-path (cons \".\" load-path)) \
#                (byte-compile-file \"doctest-mode.el\") \
#                (byte-compile-file \"pycomplete.el\") \
#                (byte-compile-file \"python-mode.el\"))'"
#}

# FIXME -- check info
# FIXME -- install docs
destroot {
    system "cd ${worksrcpath} && make install prefix=${destroot}${prefix}"
    system "cd ${worksrcpath} && make install-info prefix=${destroot}${prefix}"
    system "mv ${destroot}${prefix}/share/info/org ${destroot}${prefix}/share/info/org-mode"
}

#destroot {
#    xinstall -d ${destroot}${prefix}/share/emacs/site-lisp
#    eval xinstall -m 0644 [glob -directory ${worksrcpath} *.el *.elc] \
#        ${destroot}${prefix}/share/emacs/site-lisp
#}

# universal_variant   no


