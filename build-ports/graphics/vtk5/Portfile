# $Id: Portfile 40154 2008-09-22 22:19:55Z ryandesign@macports.org $

PortSystem 1.0

name		vtk5
version		5.2.0
set branch	[join [lrange [split ${version} .] 0 1] .]
categories	graphics devel
maintainers	rene.donner@mac.com
description	3D visualization toolkit
long_description	an open source, freely available software system  \
	for 3D computer graphics, image processing, and visualization     \
	used by thousands of researchers and developers around the world. \
	VTK consists of a C++ class library, and several interpreted      \
	interface layers including Tcl/Tk, Java, and Python.

homepage	http://www.vtk.org/
platforms	darwin freebsd
master_sites	http://www.vtk.org/files/release/${branch}/
checksums	vtk-${version}.tar.gz md5 eb8c3b463c027490164538b0fc3b35ad \
	 	vtkdata-${version}.tar.gz md5 4da83c829cf38663f9c77b681f29a921


depends_build	bin:cmake:cmake \
		port:readline
distfiles	vtk-${version}.tar.gz \
		vtkdata-${version}.tar.gz
distname	VTK

configure	{ system "cd ${worksrcpath} && ${configure.env} cmake ${configure.args} ${worksrcpath}" }
configure.args	-DBUILD_DOCUMENTATION:BOOL=ON \
                -DBUILD_EXAMPLES:BOOL=ON \
                -DBUILD_TESTING:BOOL=ON \
                -DCMAKE_C_FLAGS:STRING=-O2 \
                -DCMAKE_CXX_FLAGS:STRING=-O2 \
		-DCMAKE_INSTALL_PREFIX:PATH=${prefix} \
                -DCMAKE_VERBOSE_MAKEFILE:BOOL=ON \
		-DVTK_DATA_ROOT:PATH=${prefix}/share/VTKData \
		-DVTK_WRAP_TCL:BOOL=OFF \
		-DVTK_USE_COCOA:BOOL=OFF 

platform darwin 8 {
	configure.env-append	CC=/usr/bin/gcc-4.0 CPP=/usr/bin/cpp-4.0 MACOSX_DEPLOYMENT_TARGET=10.4
}

platform darwin 9 {
	configure.env-append	MACOSX_DEPLOYMENT_TARGET=10.5
}

variant parallel {
        configure.args-append   -DVTK_USE_PARALLEL:BOOL=ON 
}

variant cocoa {
	configure.args-delete	-DVTK_USE_COCOA:BOOL=OFF
	configure.args-append	-DVTK_USE_COCOA:BOOL=ON
}

variant carbon {
	configure.args-append	-DVTK_USE_CARBON:BOOL=ON
}

variant x11 {
	depends_build-append	lib:libX11:XFree86
	configure.args-append	-DVTK_USE_X:BOOL=ON 
}


variant python {
	depends_build-append	port:python25
	configure.args-append   -DBUILD_SHARED_LIBS:BOOL=ON \
				-DPYTHON_EXECUTABLE:FILEPATH=${prefix}/bin/python2.5 \
				-DVTK_WRAP_PYTHON:BOOL=ON 
}

variant tcl {
        configure.args-delete   -DWRAP_TCL:BOOL=OFF
	configure.args-append   -DWRAP_TCL:BOOL=ON
}

variant java {
	configure.args-append   -DWRAP_JAVA:BOOL=ON
}

