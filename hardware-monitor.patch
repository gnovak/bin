Only in hardware-monitor-0.7-new/: config.h
Only in hardware-monitor-0.7-new/: config.log
Only in hardware-monitor-0.7-new/: config.status
Only in hardware-monitor-0.7-new/: HardwareMonitor.server
Only in hardware-monitor-0.7-new/: HardwareMonitor.server.in
Only in hardware-monitor-0.7-new/help/C: Makefile
Only in hardware-monitor-0.7-new/help: Makefile
Only in hardware-monitor-0.7-new/: intltool-extract
Only in hardware-monitor-0.7-new/: intltool-merge
Only in hardware-monitor-0.7-new/: intltool-update
Only in hardware-monitor-0.7-new/: Makefile
Only in hardware-monitor-0.7-new/po: .intltool-merge-cache
Only in hardware-monitor-0.7-new/po: Makefile
Only in hardware-monitor-0.7-new/po: Makefile.in
Only in hardware-monitor-0.7-new/po: POTFILES
Only in hardware-monitor-0.7-new/src: applet.o
Only in hardware-monitor-0.7-new/src: bar-view.o
Only in hardware-monitor-0.7-new/src: canvas-view.o
Only in hardware-monitor-0.7-new/src: choose-monitor-window.o
Only in hardware-monitor-0.7-new/src: column-view.o
diff -r --context hardware-monitor-0.7/src/curve-view.cpp hardware-monitor-0.7-new/src/curve-view.cpp
*** hardware-monitor-0.7/src/curve-view.cpp	2003-08-25 08:56:55.000000000 -0700
--- hardware-monitor-0.7-new/src/curve-view.cpp	2003-10-13 22:23:42.000000000 -0700
***************
*** 48,53 ****
--- 48,56 ----
    
  private:
    std::auto_ptr<Gnome::Canvas::Line> line;
+   // GSN
+   std::auto_ptr<Gnome::Canvas::Line> gsn_line[10];
+   int gsn_nlines;
  
    // we need to store the past values
    typedef std::deque<double> value_sequence;
***************
*** 58,64 ****
  };
  
  Curve::Curve(Monitor *m, const Glib::ustring &mon_dir)
!   : monitor(m), monitor_dir(mon_dir)
  {}
  
  void Curve::update(unsigned int max_samples)
--- 61,67 ----
  };
  
  Curve::Curve(Monitor *m, const Glib::ustring &mon_dir)
!   : monitor(m), gsn_nlines(0), monitor_dir(mon_dir)
  {}
  
  void Curve::update(unsigned int max_samples)
***************
*** 114,123 ****
      client->set(monitor_dir + "/line_width", line_width);
    }
    
- 
    line->property_fill_color_rgba() = color;
    line->property_width_units() = line_width;
-   
  
    double max = std::max(monitor->max(), 0.000001); // avoid division by zero
  
--- 117,124 ----
***************
*** 138,145 ****
    } while (++vi != vend);
  
    line->property_points() = points;
- }
  
  
  //
  // class CurveView
--- 139,178 ----
    } while (++vi != vend);
  
    line->property_points() = points;
  
+   // GSN starts here
+   // make sure line is initialised
+   int gsn_lines_needed = (int) max;
+   // need more lines than we have
+   if (gsn_nlines < gsn_lines_needed) {
+     for (int i=gsn_nlines; i<gsn_lines_needed; i++) 
+       gsn_line[i].reset(new Gnome::Canvas::Line(*canvas.root()));
+     gsn_nlines = gsn_lines_needed;
+   }
+   // have more lines than we need
+   else if (gsn_nlines > gsn_lines_needed) {
+     for (int i=gsn_nlines; i<gsn_lines_needed; i++) 
+       delete gsn_line[i].release();
+     gsn_nlines = gsn_lines_needed;
+   }
+ 
+   double gsn_y;
+   for (int i=0; i<gsn_nlines; i++) {
+     if (gsn_line[i].get() == 0) 
+       gsn_line[i].reset(new Gnome::Canvas::Line(*canvas.root()));
+ 
+     gsn_line[i]->property_fill_color_rgba() = color;
+     gsn_line[i]->property_width_units() = line_width;
+     
+     Gnome::Canvas::Points gsn_points;
+     gsn_points.reserve(values.size());
+     gsn_y = line_width/2 + (1 - ((i+1) / max)) * (height - line_width/2);
+     gsn_points.push_back(Gnome::Art::Point(0,     gsn_y));
+     gsn_points.push_back(Gnome::Art::Point(width, gsn_y));
+     gsn_line[i]->property_points() = gsn_points;
+   }
+   // GSN ends here
+ }
  
  //
  // class CurveView
Only in hardware-monitor-0.7-new/src: curve-view.o
Only in hardware-monitor-0.7-new/src: flame-view.o
Only in hardware-monitor-0.7-new/src: hardware-monitor
Only in hardware-monitor-0.7-new/src: helpers.o
Only in hardware-monitor-0.7-new/src: main.o
Only in hardware-monitor-0.7-new/src: Makefile
Only in hardware-monitor-0.7-new/src: monitor-impls.o
Only in hardware-monitor-0.7-new/src: preferences-window.o
Only in hardware-monitor-0.7-new/src: text-view.o
Only in hardware-monitor-0.7-new/src: view.o
Only in hardware-monitor-0.7-new/: stamp-h
